<?php
/** @var \Mollie\Payment\Block\Product\View\ApplePay $block */

if (!$block->isEnabled()) {
    return;
}
?>

<div id="product-page-mollie-apple-pay-button" data-bind="scope:'mollie-apple-pay-button'">
    <!-- ko if: canUseApplePay() -->
    <div class="<?= $block->escapeHtmlAttr($block->getButtonClasses()); ?>" data-bind="click: payWithApplePay">
        <span>Apple Pay</span>
    </div>
    <!-- /ko -->
</div>
<script type="text/x-magento-init">
{
    "*": {
        "Magento_Ui/js/core/app": {
            "components": {
                "mollie-apple-pay-button": {
                    "component": "Mollie_Payment/js/view/product/apple-pay-button",
                    "config": {
                        "formSelector": "#product_addtocart_form",
                        "currencyCode": "<?= $block->escapeJs($block->getCurrencyCode()); ?>",
                        "countryCode": "<?= $block->escapeJs($block->getCountryCode()); ?>",
                        "productName": "<?= $block->escapeJs($block->getProductName()); ?>",
                        "storeName": "<?= $block->escapeJs($block->getStoreName()); ?>",
                        "supportedNetworks": <?= json_encode($block->getSupportedNetworks()); ?>
                    }
                }
            }
        }
    }
}
</script>
